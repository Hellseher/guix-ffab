From f587257f2c068960659a99f1336d672f134e1d19 Mon Sep 17 00:00:00 2001
Message-ID: <f587257f2c068960659a99f1336d672f134e1d19.1729453324.git.sharlatanus@gmail.com>
In-Reply-To: <cover.1729453324.git.sharlatanus@gmail.com>
References: <cover.1729453324.git.sharlatanus@gmail.com>
From: Sharlatan Hellseher <sharlatanus@gmail.com>
Date: Fri, 4 Oct 2024 15:04:01 +0100
Subject: [PATCH 38/42] gnu: Add python-pymcubes.

* gnu/packages/python-science.scm (python-pymcubes): New variable.

Change-Id: I47273d933824fb96d3c2c1950f0a2f89ce635c41
---
 gnu/packages/python-science.scm | 42 +++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)

diff --git a/gnu/packages/python-science.scm b/gnu/packages/python-science.scm
index 7c8d41cdc2..9169c28248 100644
--- a/gnu/packages/python-science.scm
+++ b/gnu/packages/python-science.scm
@@ -1382,6 +1382,48 @@ (define-public python-pyjanitor
 ease-of-use and expressiveness of the @code{dplyr} package.")
     (license license:expat)))
 
+(define-public python-pymcubes
+  (package
+    (name "python-pymcubes")
+    (version "0.1.6")
+    (source
+     (origin
+       (method git-fetch) ; no tests in PyPI
+       (uri (git-reference
+             (url "https://github.com/pmneila/PyMCubes")
+             (commit (string-append "v" version))))
+       (file-name (git-file-name name version))
+       (sha256
+        (base32 "1v2qhc4pwanx6a8k843mbh45yk77n3w63sy5lzk5c3q4pkvfj1b9"))))
+    (build-system pyproject-build-system)
+    (arguments
+     (list
+      #:phases
+      #~(modify-phases %standard-phases
+          (add-before 'check 'prepare-test-environment
+            (lambda _
+              ;; FileNotFoundError: [Errno 2] No such file or directory:
+              ;; 'output/test.obj'
+              (mkdir "output")
+              (invoke "python" "setup.py" "build_ext" "--inplace"))))))
+    (native-inputs
+     (list python-cython
+           python-pytest
+           python-setuptools
+           python-wheel))
+    (propagated-inputs
+     (list python-pycollada
+           python-numpy
+           python-scipy))
+    (home-page "https://github.com/pmneila/PyMCubes")
+    (synopsis "Marching cubes for Python")
+    (description
+     "@code{PyMCubes} is an implementation of the marching cubes algorithm to
+extract iso-surfaces from volumetric data.  The volumetric data can be given
+as a three-dimensional @code{NumPy} array or as a Python function @code{f(x,
+y, z)}.")
+    (license license:bsd-3)))
+
 (define-public python-pythran
   (package
     (name "python-pythran")
-- 
2.46.0

