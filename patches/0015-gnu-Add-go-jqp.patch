From ba8b2dd62a38bcc3fcded136d2e5fbc098a3e58d Mon Sep 17 00:00:00 2001
Message-ID: <ba8b2dd62a38bcc3fcded136d2e5fbc098a3e58d.1732837202.git.sharlatanus@gmail.com>
In-Reply-To: <cover.1732837202.git.sharlatanus@gmail.com>
References: <cover.1732837202.git.sharlatanus@gmail.com>
From: "Artyom V. Poptsov" <poptsov.artyom@gmail.com>
Date: Sun, 24 Nov 2024 13:27:37 +0300
Subject: [PATCH 15/15] gnu: Add go-jqp.

* gnu/packages/golang-xyz.scm (go-jqp): New variable.

Change-Id: I736e039a456960e0e5864d7d197b2a6a823bbe58
Reviewed-by: Sharlatan Hellseher <sharlatanus@gmail.com>
---
 gnu/packages/web.scm | 39 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 39 insertions(+)

diff --git a/gnu/packages/web.scm b/gnu/packages/web.scm
index f574c5c9bb..2439a6962f 100644
--- a/gnu/packages/web.scm
+++ b/gnu/packages/web.scm
@@ -5629,6 +5629,45 @@ (define-public gojq
       (list #:import-path "github.com/itchyny/gojq/cmd/gojq"
             #:install-source? #f)))))
 
+(define-public go-jqp
+  (package
+    (name "go-jqp")
+    (version "0.7.0")
+    (source
+     (origin
+       (method git-fetch)
+       (uri (git-reference
+             (url "https://github.com/noahgorstein/jqp")
+             (commit (string-append "v" version))))
+       (file-name (git-file-name name version))
+       (sha256
+        (base32 "11xqh4113gkzp32hd4dg4cvjp40q3hxfh3889wd4bw2snl0alvcb"))))
+    (build-system go-build-system)
+    (arguments
+     (list
+      #:go go-1.22
+      #:embed-files #~(list ".*.xml")
+      #:install-source? #f
+      #:import-path "github.com/noahgorstein/jqp"))
+    (inputs
+     (list go-github-com-spf13-viper
+           go-github-com-spf13-cobra
+           go-github-com-muesli-termenv
+           go-github-com-itchyny-gojq
+           go-github-com-itchyny-timefmt-go
+           go-github-com-charmbracelet-lipgloss
+           go-github-com-charmbracelet-bubbletea
+           go-github-com-charmbracelet-bubbles
+           go-github-com-atotto-clipboard
+           go-github-com-alecthomas-chroma-v2))
+    (home-page "https://github.com/noahgorstein/jqp")
+    (synopsis "TUI playground to experiment with jq")
+    (description
+     "This package provides an interactive TUI to explor the @code{jq} command
+line utility.  The command accepts an optional query argument which will be
+executed against the input JSON or newline-delimited JSON (NDJSON).")
+    (license license:expat)))
+
 (define-public pup
   (let ((revision "1")
         (commit "681d7bb639334bf485476f5872c5bdab10931f9a"))
-- 
2.46.0

