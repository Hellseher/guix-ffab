From 91e7efaafe7e2003cc0e1fa185a85f34bd5a2920 Mon Sep 17 00:00:00 2001
Message-ID: <91e7efaafe7e2003cc0e1fa185a85f34bd5a2920.1724198118.git.sharlatanus@gmail.com>
In-Reply-To: <cover.1724198118.git.sharlatanus@gmail.com>
References: <cover.1724198118.git.sharlatanus@gmail.com>
From: Sharlatan Hellseher <sharlatanus@gmail.com>
Date: Tue, 6 Aug 2024 13:34:11 +0100
Subject: [PATCH 30/32] gnu: Add python-sunkit-image.

* gnu/packages/astronomy.scm (python-sunkit-image): New variable.

Change-Id: I3213dc2dc2be23407db9316f5ed84a9d248cbee2
---
 gnu/packages/astronomy.scm | 44 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

diff --git a/gnu/packages/astronomy.scm b/gnu/packages/astronomy.scm
index 4c96098145..e36a3b57ce 100644
--- a/gnu/packages/astronomy.scm
+++ b/gnu/packages/astronomy.scm
@@ -1560,6 +1560,50 @@ (define-public python-specreduce
     (license (list license:bsd-3     ; licenses/LICENSE.rst, same as python-astropy
                    license:expat)))) ; licenses/KOSMOS_LICENSE
 
+(define-public python-sunkit-image
+  (package
+    (name "python-sunkit-image")
+    (version "0.5.1")
+    (source
+     (origin
+       (method url-fetch)
+       (uri (pypi-uri "sunkit_image" version))
+       (sha256
+        (base32 "1wzii7dy0yb2lx0k8m3iak5vxc0wbybj5cdkvrk93sr14k9crqds"))))
+    (build-system pyproject-build-system)
+    (arguments
+     (list
+      ;; XXX: Check with upstram: assert False.
+      #:test-flags #~(list "-k" "not test_fnrgf")
+      #:phases
+      #~(modify-phases %standard-phases
+         (add-before 'check 'set-home
+           (lambda _
+             ;; For tests: Permission denied: '/homeless-shelter'
+             (setenv "HOME" "/tmp"))))))
+    (propagated-inputs
+     (list python-astropy
+           python-matplotlib
+           python-numpy
+           python-scikit-image
+           python-scipy
+           python-sunpy))
+    (native-inputs
+     (list python-astroscrappy
+           python-beautifulsoup4
+           python-dask
+           python-drms
+           python-importlib-resources
+           python-pytest-astropy
+           python-pytest-mpl
+           python-setuptools-scm
+           python-zeep))
+    (home-page "http://docs.sunpy.org/projects/sunkit-image/")
+    (synopsis "Solar Physics image processing toolbox")
+    (description
+     "This package provides an image processing toolbox for Solar Physics.")
+    (license license:bsd-2)))
+
 (define-public wcslib
   (package
     (name "wcslib")
-- 
2.41.0

