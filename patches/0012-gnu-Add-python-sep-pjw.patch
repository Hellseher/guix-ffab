From 9376df69a45780ae913e175c1647a8152c75018c Mon Sep 17 00:00:00 2001
Message-ID: <9376df69a45780ae913e175c1647a8152c75018c.1726926634.git.sharlatanus@gmail.com>
In-Reply-To: <cover.1726926633.git.sharlatanus@gmail.com>
References: <cover.1726926633.git.sharlatanus@gmail.com>
From: Sharlatan Hellseher <sharlatanus@gmail.com>
Date: Wed, 18 Sep 2024 14:39:12 +0100
Subject: [PATCH v2 12/25] gnu: Add python-sep-pjw.

* gnu/packages/astronomy.scm (python-sep-pjw): New variable.

Change-Id: Ib0ae64a938de53ead32277606f9fc150fae76bd5
---
 gnu/packages/astronomy.scm | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

diff --git a/gnu/packages/astronomy.scm b/gnu/packages/astronomy.scm
index dae1fd0a0f..1c5fa5b6d3 100644
--- a/gnu/packages/astronomy.scm
+++ b/gnu/packages/astronomy.scm
@@ -5254,6 +5254,38 @@ (define-public python-sep
      (list  python-numpy))
     (synopsis "Python library for Source Extraction and Photometry")))
 
+(define-public python-sep-pjw
+  (package
+    (name "python-sep-pjw")
+    (version "1.3.5")
+    (source
+     (origin
+       (method url-fetch)
+       (uri (pypi-uri "sep_pjw" version))
+       (sha256
+        (base32 "15jf16zycs1gz6jfkhmj7b8wdcpp8d5ikz15pmfkwq32a8mfdv8m"))))
+    (build-system pyproject-build-system)
+    (arguments
+     (list #:test-flags #~(list "test.py")
+      #:phases
+      #~(modify-phases %standard-phases
+         (add-after 'unpack 'relax-requirements
+           (lambda _
+             (substitute* "pyproject.toml"
+               ;; numpy>=1.23.5
+               (("1.23.5") "1.23.2")))))))
+    (native-inputs
+     (list python-cython
+           python-pytest))
+    (propagated-inputs
+     (list python-numpy))
+    (home-page "https://github.com/PJ-Watson/sep-pjw")
+    (synopsis "Alternative fork of SEP library")
+    (description
+     "This package provides an alternative maintained fork of SEP python
+libary with bug fixtures.")
+    (license (list license:expat license:lgpl3+ license:bsd-3))))
+
 (define-public python-suntime
   (package
     (name "python-suntime")
-- 
2.46.0

