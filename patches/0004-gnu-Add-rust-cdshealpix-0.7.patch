From 41d03c1504551a5b3990b11c41360992a60bc1c4 Mon Sep 17 00:00:00 2001
Message-ID: <41d03c1504551a5b3990b11c41360992a60bc1c4.1733602367.git.sharlatanus@gmail.com>
In-Reply-To: <cover.1733602367.git.sharlatanus@gmail.com>
References: <cover.1733602367.git.sharlatanus@gmail.com>
From: Sharlatan Hellseher <sharlatanus@gmail.com>
Date: Sat, 7 Dec 2024 20:11:10 +0000
Subject: [PATCH 4/4] gnu: Add rust-cdshealpix-0.7.

* gnu/packages/crates-io.scm (rust-cdshealpix-0.7): New variable.

Change-Id: Iefc7ee7018725e3072bf7696445aab20f6f9bd32
---
 gnu/packages/crates-io.scm | 49 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 49 insertions(+)

diff --git a/gnu/packages/crates-io.scm b/gnu/packages/crates-io.scm
index d2eeb5a71d..07893eaac7 100644
--- a/gnu/packages/crates-io.scm
+++ b/gnu/packages/crates-io.scm
@@ -12611,6 +12611,55 @@ (define-public rust-cc-1
     (license (list license:asl2.0
                    license:expat))))
 
+(define-public rust-cdshealpix-0.7
+  (package
+    (name "rust-cdshealpix")
+    (version "0.7.3")
+    (source
+     (origin
+       (method url-fetch)
+       (uri (crate-uri "cdshealpix" version))
+       (file-name (string-append name "-" version ".tar.gz"))
+       (sha256
+        (base32 "0rxg2wsrnzfhm8pid1sv22zn1cly54zdbg2ffajx0i0dvyfpm1cc"))))
+    (build-system cargo-build-system)
+    (arguments
+     `(#:cargo-test-flags
+       (list "--release" "--"
+             ;; Tests can't find FITS files:
+             ;; - test/resources/skymap/skymap.fits
+             ;; - test/resources/skymap/skymap.2mass.depth6.fits
+             "--skip=tests::test_skymap_to_mom_basic"
+             "--skip=tests::test_skymap_to_mom_chi2"
+             "--skip=tests::test_mom_diff_spec"
+             "--skip=tests::test_skymap_spec")
+     #:cargo-inputs
+       (("rust-base64" ,rust-base64-0.21)
+        ("rust-byteorder" ,rust-byteorder-1)
+        ("rust-colorous" ,rust-colorous-1)
+        ("rust-flate2" ,rust-flate2-1)
+        ("rust-itertools" ,rust-itertools-0.13)
+        ("rust-katex-doc" ,rust-katex-doc-0.1)
+        ("rust-log" ,rust-log-0.4)
+        ("rust-mapproj" ,rust-mapproj-0.3)
+        ("rust-num" ,rust-num-0.4)
+        ("rust-num-traits" ,rust-num-traits-0.2)
+        ("rust-png" ,rust-png-0.17)
+        ("rust-serde" ,rust-serde-1)
+        ("rust-thiserror" ,rust-thiserror-1))
+       #:cargo-development-inputs
+       (("rust-criterion" ,rust-criterion-0.4)
+        ("rust-rand" ,rust-rand-0.8))))
+    (home-page "https://github.com/cds-astro/cds-healpix-rust/")
+    (synopsis "HEALPix tesselation")
+    (description
+     "This library is an implementation in Rust of the HEALPix tesselation.
+This implementation has been made by the Strasbourg astronomical Data
+Centre (Centre de Donn√©es astronomique de Strasbourg,
+@url{http://cdsweb.u-strasbg.fr/,CDS}).")
+    (license (list license:asl2.0
+                   license:expat))))
+
 (define-public rust-cesu8-1
   (package
     (name "rust-cesu8")
-- 
2.46.0

